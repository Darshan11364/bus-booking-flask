
{% extends 'base.html' %}
{% block content %}
<h2>{{ route.bus_name }} — {{ route.source }} → {{ route.destination }}</h2>
<div class="card">
    <p>Date: <b>{{ route.travel_date.strftime('%d %b %Y') }}</b></p>
    <p>Departure: <b>{{ route.departure_time.strftime('%H:%M') }}</b> · Arrival: <b>{{ route.arrival_time.strftime('%H:%M') }}</b></p>
    <p>Fare: <b>₹{{ '%.0f'|format(route.price) }}</b></p>
    <p>Available seats: <b>{{ route.available_seats() }}</b> / {{ route.total_seats }}</p>
</div>
{% if route.available_seats() > 0 %}
<form class="card form" method="POST" action="{{ url_for('book', route_id=route.id) }}">
    <div class="row">
        <label>Your name</label>
        <input name="name" required>
    </div>
    <div class="row">
        <label>Email</label>
        <input name="email" type="email" required>
    </div>
    <div class="row">
        <label>Seats</label>
        <input name="seats" type="number" value="1" min="1" max="{{ route.available_seats() }}" required>
    </div>
    <button type="submit">Confirm Booking</button>
</form>
{% else %}
<p class="muted">Sold out.</p>
{% endif %}
{% endblock %}
